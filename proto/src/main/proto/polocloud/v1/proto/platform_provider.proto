syntax = "proto3";

package dev.httpmarco.polocloud.v1.proto;

option java_package = "dev.httpmarco.polocloud.v1.platform";
option java_multiple_files = true;

import "polocloud/v1/proto/object_utils.proto";

service PlatformController {
  rpc find(PlatformFindRequest) returns (PlatformFindResponse);
}

message PlatformFindRequest {
  optional string name = 1;
  optional GroupType type = 2;
}

message PlatformFindResponse {
  repeated PlatformSnapshot platforms = 1;
}

message PlatformSnapshot {
  string name = 1;
  string url = 2;
  PlatformLanguageSnapshot language = 3;
  string shutdownCommand = 4;
  GroupType type = 5;
  repeated string arguments = 6;
  repeated string flags = 7;
  repeated PlatformVersionSnapshot versions = 8;
  repeated string tasks = 9;
  repeated string preTasks = 10;
  bool copyServerIcon = 11;
  bool setFileName = 12;
}

message PlatformLanguageSnapshot {
  string fileSuffix = 1;
  bool nativeExecutable = 2;
}

message PlatformVersionSnapshot {
  string version = 1;
  map<string, string> additionalProperties = 2;
}